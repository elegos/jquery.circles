!function(r){"use strict";var t=Backbone.Model.extend({defaults:{radius:50,color:"#3498db",coord:{x:0,y:0},rendered:!1},initialize:function(){}});r.fn.circles=function(o){var e={circleColors:["#1abc9c","#27ae60","#3498db","#8e44ad","#34495e","#f1c40f","#f39c12","#d35400","#e74c3c","#bdc3c7","#7f8c8d"],radius:50},c=this,i=c.get(0).getContext("2d"),a=[],n=function(){r(a).each(function(){if(!this.attributes.rendered){var r=this.attributes;i.beginPath(),i.arc(r.coord.x,r.coord.y,r.radius,0,2*Math.PI,!1),i.fillStyle=r.color,i.fill(),i.closePath(),this.attributes.rendered=!0}})},d=function(r){var t="",o=0;do o=Math.floor(Math.random()*e.circleColors.length),t=e.circleColors[o];while(t===r&&e.circleColors.length>1);return t},u=function(o,c,i){var u="undefined"==typeof i?e.radius:i,s="";r(a).each(function(){var r=this.attributes;Math.pow(o-r.coord.x,2)+Math.pow(c-r.coord.y,2)<Math.pow(u,2)&&(o=r.coord.x,c=r.coord.y,s=r.color,u=.8*r.radius)});var l=new t({color:d(s),coord:{x:o,y:c},radius:u});a.push(l),n()},s=function(){var t=a;a=[],i.clearRect(0,0,c.outerWidth(),c.outerHeight()),r(t).each(function(){u(this.attributes.coord.x,this.attributes.coord.y)})},l=function(){return{addCircle:u,randomizeColors:s}};return r.extend(e,o),l()}}(jQuery);